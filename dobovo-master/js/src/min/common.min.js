$(document).ready(function(){function t(){$(".js-select").each(function(){var t=$(this).parent().find(".js-select-list");$(this).click(function(){$(this).parent().hasClass("is-active")?($(this).parent().removeClass("is-active"),t.hide()):($(this).parent().addClass("is-active"),t.show())}),t.find("li").click(function(){var t=$(this).attr("data-id"),e=$(this).text();$(this).parent().parent().find(".js-select").text(e),$(this).parent().parent().find("input").val(t),$(this).parent().hide(),$(this).parent().parent().removeClass("is-active")})})}function e(){$(".js-flat-pricer").each(function(){var t=$(this).find(".js-from").val().length,e=$(this).find(".js-to").val().length;t>0&&e>0&&($(".js-order-btn").show(),$(".js-choose-date-btn").hide()),$(this).find(".js-choose-date-btn").bind("click",function(){$(this).parent().find(".js-first-date").addClass("is-active"),$(this).parent().find(".js-first-date .js-datepicker").show(),event.stopPropagation()})})}function s(){var t=$(".js-choose-number");t.each(function(){var e=+$(this).parent().parent().attr("data-max-number"),s=$(this).parent().parent().find(".js-plus"),i=$(this).parent().parent().find(".js-minus");s.bind("click",function(){var s=+$(this).parent().find(t).text();return s>=e?!1:(s+=1,$(this).parent().find(".choose__input").val(s),$(this).parent().find(t).text(s),void 0)}),i.bind("click",function(){var e=+$(this).parent().find(t).text();return e>1?(e-=1,$(this).parent().find(".choose__input").val(e),$(this).parent().find(t).text(e),void 0):!1})}),$(".js-choose-key").bind("click",function(){$(this).parent().toggleClass("is-active"),$(this).parent().find(".js-choose-list").toggle()}),$(".js-choose-list").click(function(t){t.stopPropagation()}),$(".js-choose").click(function(t){t.stopPropagation()}),$(".js-choose").each(function(){var t=$(this).parent().find(".js-choose-list");$(this).click(function(){$(this).parent().hasClass("is-active")?($(this).parent().removeClass("is-active"),t.hide()):($(".js-choose").parent().removeClass("is-active"),$(this).parent().addClass("is-active"),$(".js-choose-list").hide(),t.show())}),t.find("li").click(function(){var t=$(this).attr("data-id"),e=$(this).text();$(this).parent().parent().find(".js-choose-number").text(e),$(this).parent().parent().find("input").val(t),$(this).parent().hide(),$(this).parent().parent().removeClass("is-active")})})}function i(){$(".js-drop-key").bind("click",function(t){var e=$(this).attr("data-drop-id");$(this).parent().toggleClass("is-active"),$("."+e).toggle(),t.stopPropagation()}),$(".js-drop-list").click(function(t){t.stopPropagation()});var t=$(".js-drop-more"),e=$(".js-drop-hide");t.bind("click",function(){$(this).parent().parent().addClass("is-extend")}),e.bind("click",function(){$(this).parent().parent().removeClass("is-extend")})}function a(){$(".js-slider").length>0&&$(".js-slider").each(function(){var t=$(this).find(".js-cycle-1"),e=$(this).find(".js-cycle-2"),s=$(this).find(".js-cycle-prev"),i=$(this).find(".js-cycle-next");e.cycle({prev:s,next:i}),t.cycle();var a=$(this).find(".js-cycle").on("cycle-next cycle-prev",function(t,e){a.not(this).cycle("goto",e.currSlide)});e.find(".cycle-slide").click(function(){var t=e.data("cycle.API").getSlideIndex(this);a.cycle("goto",t)})})}function n(){$(".js-tab-key").bind("click",function(t){if($(this).hasClass("is-active"))$(this).removeClass("is-active"),$(".js-tab-cont").hide();else{$(".js-tab-key").removeClass("is-active"),$(".js-tab-cont").hide(),$(this).addClass("is-active");var e=$(this).attr("data-tab");$("."+e).show()}t.stopPropagation()}),$(".js-tab-cont").click(function(t){t.stopPropagation()})}function c(){if($(".js-targe-info").length)var t=$(".js-targe-info").offset().top;$(window).scrollTop()>t?$(".flat-info-fixed").fadeIn("fast"):$(".flat-info-fixed").fadeOut("fast")}$(document).click(function(){$(".js-datepicker").hide(),$(".js-show-calendar").removeClass("is-active"),$(".js-choose").parent().removeClass("is-active"),$(".js-choose-list").hide(),$(".js-select-list").hide(),$(".js-select").parent().removeClass("is-active"),$(".js-drop-key").parent().removeClass("is-active"),$(".js-drop-list").hide(),$(".js-tab-key").removeClass("is-active"),$(".js-sel-key").removeClass("is-active"),$(".js-tab-cont").hide(),$(".js-faq-sticker").removeClass("is-visible")}),t(),$(".js-select-list").click(function(t){t.stopPropagation()}),$(".js-select").click(function(t){t.stopPropagation()}),$(".js-sel-key").click(function(t){$(this).hasClass("is-active")?$(this).removeClass("is-active"):($(".js-sel-key").removeClass("is-active"),$(this).addClass("is-active")),$(".js-show-calendar").removeClass("is-active"),$(".js-datepicker").hide(),t.stopPropagation()}),$(".js-sel-list li").click(function(t){var e=$(this).attr("data-id"),s=$(this).text();if($(this).parent().parent().find(".js-sel-text").val(s),$(this).parent().parent().find(".js-sel-input").val(e),$(this).parent().parent().removeClass("is-active"),$(this).parent().parent().hasClass("select_city")){$(".js-datepicker-from").show();var i=$(this).attr("data-maxpersons")>10?10:parseInt($(this).attr("data-maxpersons"));$("#dbv_select_guests ul li").each(function(){parseInt($(this).attr("data-id"))>i?$(this).hide():$(this).show()}),i<$("#dbv_select_guests .js-sel-input").val()&&($("#dbv_select_guests .js-sel-text").val(""),$("#dbv_select_guests .js-sel-input").val(1))}t.stopPropagation()}),$(".js-all-city").click(function(){return $(".js-city-list").toggle(),$("html, body").animate({scrollTop:$(".js-city-list").offset().top},500),!1}),$(".js-to-comments").click(function(){return $("html, body").animate({scrollTop:$(".js-comment-target").offset().top},500),!1}),$(".js-to-top").click(function(){$("html, body").animate({scrollTop:0},200)}),$(".js-datepicker").length>0&&($(".js-datepicker").each(function(){$(this).hide(),$.datepicker.regional.all={weekHeader:"ะะต",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,minDate:"0",showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional[dbv_get_current_lang()]),$.datepicker.setDefaults($.datepicker.regional.all),$(".js-datepicker-from").datepicker({showOtherMonths:!0,onSelect:function(){$(".js-show-calendar").removeClass("is-active"),$(".js-datepicker").hide();var t=new Date($(".js-datepicker-from").datepicker("getDate"));$(".js-from").val($.datepicker.formatDate("d MM",t)),$(".js-from").css("padding-left","10px"),$(".js-from").parent().parent().find(".select__input-text").hide(),t.setDate(t.getDate()+1),$(".js-to").val($.datepicker.formatDate("d MM",t)),$(".js-to").css("padding-left","10px"),$(".js-datepicker-to").datepicker("option","minDate",t),$(".js-datepicker-to").datepicker("setDate",t),e(),$(".js-datepicker-to").show()}}),$(".js-datepicker-to").datepicker({showOtherMonths:!0,onSelect:function(){$(".js-show-calendar").removeClass("is-active"),$(".js-datepicker").hide();var t=new Date($(".js-datepicker-to").datepicker("getDate"));$(".js-to").val($.datepicker.formatDate("d MM",t)),$(".js-to").css("padding-left","10px"),$(".js-to").parent().find(".select__input-text").hide(),t.setDate(t.getDate()-1),$(".js-datepicker-from").datepicker("option","maxDate",t),e(),$(".js-sel-key").removeClass("is-active"),$("#dbv_search_btn").fadeTo(100,.5,function(){$("#dbv_search_btn").fadeTo(100,1),$("#dbv_search_btn").fadeTo(100,.5,function(){$("#dbv_search_btn").fadeTo(100,1)})})}})}),$(".js-show-calendar").click(function(){$(this).hasClass("is-active")?($(this).removeClass("is-active"),$(".js-datepicker").hide()):($(".js-show-calendar").removeClass("is-active"),$(this).addClass("is-active"),$(".js-datepicker").hide(),$(this).find(".js-datepicker").show())}),$(".js-datepicker").click(function(t){t.stopPropagation()}),$(".js-show-calendar").click(function(t){$(".js-sel-key").removeClass("is-active"),t.stopPropagation()})),e(),$(".js-top-popup").click(function(){$(".js-top-popup").removeClass("is-active"),$(this).toggleClass("is-active")}),s(),$(".js-extend-link").click(function(){$(this).parent().find(".js-extend").toggleClass("is-active")}),i(),a(),$(".js-close").bind("click",function(){$(this).parent().hide(),$(".js-overlay").hide()}),$(".js-popup").click(function(t){t.stopPropagation()}),$(".js-overlay").bind("click",function(){$(this).hide(),$(".js-popup").hide()}),n();var o=$(".js-tooltip");o.hover(function(){$(this).show()},function(){$(this).hide()}),$(".js-with-tooltip").hover(function(){var t=$(this).offset().left,e=$(this).offset().top+$(this).outerHeight(),s=$(this).attr("data-info");o.children().html(s),o.css({left:t,top:e}),$(this).parent().parent().hasClass("owner__list")&&o.css({left:t-22,top:e}),o.fadeIn("fast")},function(){o.hide()}),$(".js-to-map-popup").click(function(){return $(".js-popup-map").show(),$(".js-overlay").show(),!1}),$(".js-del").click(function(){$(this).parent().remove()}),$(".js-marked-link").hide(),$(".js-btn-mark").bind("click",function(){return $(this).toggleClass("is-active"),$(this).parents(".catalog-wrap").find(".js-btn-mark.is-active").length>0||$(this).parents(".map").find(".js-btn-mark.is-active").length>0||$(this).parents(".flat-pricer").find(".js-btn-mark.is-active").length>0?$(".js-marked-link").show():$(".js-marked-link").hide(),!1}),$(".flat-info-fixed").length>0&&c(),$(window).scroll(function(){$(".flat-info-fixed").length>0&&c()}),$(".js-open-faq").click(function(t){return $(".js-faq-sticker").toggleClass("is-visible"),t.stopPropagation(),!1}),$(".js-faq-sticker").click(function(t){t.stopPropagation()}),$(".js-close-sticker").click(function(){$(this).parent().toggleClass("is-visible")})});